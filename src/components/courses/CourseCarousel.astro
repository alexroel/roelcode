---
import CourseCard from "./CourseCard.astro";
const { courses } = Astro.props;

import { Icon } from "astro-icon/components";
---

<div class="relative">
  <div class="overflow-hidden" id="embla-courses">
    <div class="flex" id="embla-courses__container">
      {
        courses.map((course: any) => (
          <div class="embla__slide flex-shrink-0 w-full md:w-1/2 lg:w-1/3 px-2 py-8">
            <CourseCard course={course} />
          </div>
        ))
      }
    </div>
  </div>
  <button
    id="emblaCoursesPrev"
    class="absolute left-[-40px] top-1/2 -translate-y-1/2 bg-gray-300 dark:bg-gray-700 shadow p-2 rounded-full z-10 hidden md:block hover:cursor-pointer"
  >
    <Icon name="arrow-left" class="w-6 h-6" />
  </button>
  <button
    id="emblaCoursesNext"
    class="absolute right-[-40px] top-1/2 -translate-y-1/2 bg-gray-300 dark:bg-gray-700 shadow p-2 rounded-full z-10 hidden md:block hover:cursor-pointer"
  >
    <Icon name="arrow-right" class="w-6 h-6" />
  </button>
</div>
<script type="module">
  import EmblaCarousel from "https://cdn.skypack.dev/embla-carousel@7.0.0";
  const emblaNode = document.getElementById("embla-courses");
  const embla = EmblaCarousel(emblaNode, {
    loop: true,
    align: "start",
    slidesToScroll: 1,
  });
  document.getElementById("emblaCoursesPrev").onclick = () =>
    embla.scrollPrev();
  document.getElementById("emblaCoursesNext").onclick = () =>
    embla.scrollNext();
</script>
<style>
  @media (min-width: 768px) {
    .embla__slide {
      width: 50% !important;
    }
  }
  @media (min-width: 1024px) {
    .embla__slide {
      width: 33.3333% !important;
    }
  }
</style>
